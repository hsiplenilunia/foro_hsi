---
import { menu } from "./data/menuData.ts";
import CloseIcon from "./icons/CloseIcon.astro";
import DownTriangleIcon from "./icons/DownTriangleIcon.astro";
import MailIcon from "./icons/MailIcon.astro";
import PhoneIcon from "./icons/PhoneIcon.astro";
---

<div
  id="modal-menu-container"
  class="hidden fixed inset-0 z-50 bg-black/25 backdrop-blur-lg transition-opacity duration-300"
  role="dialog"
  aria-modal="true"
>
  <div
    id="menu-panel"
    class="fixed top-0 right-0 h-full w-[80%] max-w-sm bg-white/50 text-black-text flex flex-col transition-transform duration-300 ease-in-out transform translate-x-full"
  >
    <div class="flex items-center justify-between p-6 border-b border-white/10">
      <img src="https://res.cloudinary.com/difrqz0ke/image/upload/v1752888449/Logo-HSI_1_lopusa.webp" alt="logo HSI">
      <button
        id="close-btn"
        aria-label="Cerrar menÃº"
        class="text-white hover:text-apple p-2 rounded-full hover:bg-white/10 transition"
      >
        <CloseIcon />
      </button>
    </div>
    <div class="flex-1 overflow-y-auto p-6">
      <ul class="space-y-4 text-base font-bold uppercase">
        {
          menu.map((item) => (
            <li>
              {item.subOptions ? (
                <details class="bg-green-hsi text-white tracking-wide rounded-lg shadow-2xl overflow-hidden group">
                  <summary class="px-4 py-3 flex justify-between items-center cursor-pointer list-none">
                    <div class="flex flex-grow justify-center">
                      {item.name}
                    </div>
                    <div class="transition-transform duration-200 group-open:rotate-180">
                      <DownTriangleIcon />
                    </div>
                  </summary>
                  <ul class="bg-white text-[#351B64] text-base uppercase font-bold space-y-1 p-2">
                    {item.subOptions.map((sub) => (
                      <li>
                        <a
                          href={sub.link}
                          class="block px-4 py-2 hover:bg-white/50 rounded-md"
                        >
                          {sub.name}
                        </a>
                      </li>
                    ))}
                  </ul>
                </details>
              ) : (
                <a
                  href={item.link}
                  class="block px-4 py-3 bg-green-hsi text-white tracking-wide shadow-xl rounded-lg text-center hover:bg-white/20 transition-colors"
                >
                  {item.name}
                </a>
              )}
            </li>
          ))
        }
      </ul>
      <div class="mt-8 pt-4 border-t border-white/10 text-sm space-y-2">
        <p class="flex items-center gap-2 mb-6">
          <span><PhoneIcon/></span>
          <a href="https://wa.me/525511355967" class="hover:underline text-lg">+52 55 1135 5967</a>
        </p>
        <p class="flex items-center gap-2">
          <span><MailIcon/></span>
          <a href="mailto:eventos@hospitalesininfecciones.com" class=" tracking-tight hover:underline text-base">eventos@hospitalesininfecciones.com</a>
        </p>
      </div>
    </div>
  </div>
</div>


